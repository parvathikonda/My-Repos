#!/usr/bin/python
# This script is part of OMD
# Joerg Linge 2010
#
import sys
import os

omd_config = {}
execfile('%s/etc/omd/site.conf' % os.environ['OMD_ROOT'], {}, omd_config)

sys.stdout.write("""#
# Do not edit this file. It will be recreated each time OMD
# is started or reloaded.
#
# execute 'omd reload crontab'
# to rebuild this file out of %s/etc/cron.d/*
#
# --ENVIRONMENT------------------------------------------------
""" % os.environ['OMD_ROOT'])

sys.stdout.write("OMD_ROOT=%s\n" % os.environ['OMD_ROOT'])
sys.stdout.write("OMD_SITE=%s\n" % os.environ['OMD_SITE'])
sys.stdout.write("PATH=%s\n" % os.environ['PATH'])
sys.stdout.write("PYTHONPATH=%s\n" % os.environ['PYTHONPATH'])
sys.stdout.write("MAILTO=\"%s\"\n" % omd_config.get('CONFIG_ADMIN_MAIL', ''))
sys.stdout.write("# ------------------------------------------------------------\n")


for fn in sys.argv[1:]:
    lineno = 0
    sys.stdout.write("# %s\n" % (fn))
    for line in file(fn):
	lineno += 1
	ls = line.strip()
	sys.stdout.write(line)
    sys.stdout.write("# ------------------------------------------------------------\n")
